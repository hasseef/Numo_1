<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#2B7BBC"/>
  <title>NOMU â€“ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø·ÙÙˆÙ„Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø©</title>
  <meta name="description" content="Ù…Ù†ØµØ© Ù†Ù…Ùˆ NOMU: Ø±Ø­Ù„Ø© Ø§Ù„Ø·ÙÙ„ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø­Ù…Ù„ Ø­ØªÙ‰ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø¹Ø¨Ø± ØªÙƒØ§Ù…Ù„ ØµØ­ÙŠ/ØªØ¹Ù„ÙŠÙ…ÙŠ/Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ"/>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#2B7BBC; --accent:#15A085;
      --beige:#FFF6EA; --beige-2:#FDEBD2;
      --bg:#FAFCFF; --card:#FFFFFF; --text:#0B2239; --muted:#56627A;
      --radius:16px; --gap:16px; --shadow:0 8px 24px rgba(2,18,46,.08);
      --animDur:420ms;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:linear-gradient(180deg,var(--bg),var(--beige) 200%);color:var(--text);font-family:"IBM Plex Sans Arabic",system-ui;line-height:1.65}
    a{text-decoration:none;color:var(--primary)}
    .container{max-width:1200px;margin:auto;padding:0 16px}
    .row{display:flex;gap:16px;flex-wrap:wrap;align-items:center}
    .muted{color:var(--muted)}
    .badge{background:rgba(43,123,188,.10);color:var(--primary);padding:6px 12px;border-radius:999px;font-size:.92rem}
    .btn{background:var(--primary);color:#fff;border:none;padding:12px 18px;border-radius:14px;cursor:pointer;box-shadow:var(--shadow);transition:.2s}
    .btn:hover{transform:translateY(-2px)}
    .btn.alt{background:var(--accent)}
    .btn.ghost{background:transparent;color:var(--primary);border:1px solid rgba(43,123,188,.35)}
    .card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    main section{padding:56px 0}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media(max-width:900px){.grid-3,.grid-4{grid-template-columns:1fr}}
    .hero{display:grid;grid-template-columns:1.15fr .85fr;gap:20px;align-items:center}
    @media(max-width:1000px){.hero{grid-template-columns:1fr}}

    /* === Top strip (logos) === */
    .top-strip{background:#fff;border-bottom:1px solid #E9EEF5}
    .top-strip .in{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:6px 0}
    .top-logos{display:flex;align-items:center;gap:10px}
    .top-logos img{height:34px;display:block}
    @media(max-width:768px){ .top-logos img{height:28px} }

    /* Header (wordmark only) */
    header{position:sticky;top:0;background:rgba(255,255,255,.92);backdrop-filter:blur(6px) saturate(140%);z-index:100;box-shadow:0 2px 10px rgba(0,0,0,.06)}
    .hdr-line{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:10px 0}
    .wordmark svg{height:88px; display:block}
    .wordmark text{paint-order:stroke fill; stroke:#fff; stroke-width:2.8px}
    /* Mobile alignment fix: NOMU opposite to top logos */
    @media(max-width:768px){ .wordmark svg{ height:68px } }

    nav a{padding:10px 14px;border-radius:10px;color:var(--text)}
    nav a.active,nav a:hover{background:rgba(43,123,188,.10)}

    .hide{display:none}
    .view{opacity:0;transform:translateY(10px);animation:fadeUp var(--animDur) ease forwards}
    @keyframes fadeUp{from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:none}}
    .slideIn{animation:slideIn var(--animDur) ease both}
    @keyframes slideIn{from{opacity:.0;transform:translateX(12px)} to{opacity:1;transform:none}}

    .timeline{position:relative;padding-inline-start:18px}
    .timeline::before{content:"";position:absolute;inset-inline-start:6px;top:0;bottom:0;width:4px;background:linear-gradient(#2B7BBC,#15A085);border-radius:4px;opacity:.4}
    .tl-item{position:relative;margin:12px 0;padding:12px 12px 12px 18px;background:linear-gradient(180deg,#fff,var(--beige));border-radius:12px;box-shadow:var(--shadow)}
    .tl-item::before{content:"";position:absolute;inset-inline-start:-2px;top:18px;width:12px;height:12px;background:#2B7BBC;border:3px solid #fff;border-radius:50%}

    .wallet{display:grid;grid-template-columns:1fr 2fr;gap:16px}
    @media(max-width:900px){.wallet{grid-template-columns:1fr}}

    .sponsors-line{display:flex;gap:10px;overflow:auto;scrollbar-width:none;padding:6px 0}
    .sponsors-line::-webkit-scrollbar{display:none}
    .s-logo{width:38px;height:38px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:var(--shadow);cursor:pointer}
    .tier-gold .s-logo{background:linear-gradient(135deg,#FFF4CC,#FFE79A);color:#7A5B00;border:1px solid #E8C96B}
    .tier-silver .s-logo{background:linear-gradient(135deg,#F3F7FB,#E7EEF6);color:#475569;border:1px solid #CBD5E1}
    .tier-bronze .s-logo{background:linear-gradient(135deg,#F7EDE6,#EDD8CB);color:#6B4F3A;border:1px solid #D7B8A2}

    .stats-bar{background:#fff; border-top:1px solid #E5EAF0; border-bottom:1px solid #E5EAF0; padding:10px 0; margin-top:8px}
    .stats-grid{display:grid; grid-template-columns:repeat(4,1fr); gap:12px; align-items:center}
    .stat{background:linear-gradient(180deg,#fff,var(--beige)); border-radius:12px; padding:10px; text-align:center; box-shadow:var(--shadow)}
    .stat h4{margin-bottom:4px}

    footer{background:#fff;border-top:1px solid #EDF2F7;padding:12px;text-align:center;font-size:.9rem;color:var(--muted)}
  </style>
</head>
<body>

  <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ: Ø´Ø¹Ø§Ø±ÙŠ Ø±Ø¤ÙŠØ© 2030 + ØªÙ„Ø¨ÙŠØ© -->
  <div class="top-strip">
    <div class="container in">
      <div class="top-logos">
        <!-- Ø®ÙŠØ§Ø± ÙŠØ¹Ù…Ù„ ÙÙˆØ±Ù‹Ø§ (SVG Ù†ØµÙ‘ÙŠ Ø®ÙÙŠÙ): -->
        <img alt="Ø±Ø¤ÙŠØ© 2030"
             src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="180" height="36"><rect width="180" height="36" fill="white"/><text x="50%" y="62%" text-anchor="middle" font-family="Arial" font-size="16" fill="%23666">Ø±Ø¤ÙŠØ© 2030</text></svg>'/>
        <img alt="Ø´Ø±ÙƒØ© ØªÙ„Ø¨ÙŠØ©"
             src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="36"><rect width="160" height="36" fill="white"/><text x="50%" y="62%" text-anchor="middle" font-family="Arial" font-size="16" fill="%23009055">Talbiya</text></svg>'/>

        <!-- Ø¨Ø¯Ø§Ø¦Ù„ Base64 Ø§Ù„Ø±Ø³Ù…ÙŠØ© (Ø£Ø²Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ÙˆØ¶Ø¹ Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ù„Ø¯ÙŠÙƒ):
        <img alt="Ø±Ø¤ÙŠØ© 2030" src="data:image/png;base64, VISION_B64_HERE"/>
        <img alt="Ø´Ø±ÙƒØ© ØªÙ„Ø¨ÙŠØ©" src="data:image/png;base64, TALBIYA_B64_HERE"/>
        -->
      </div>
      <div style="font-size:.85rem;color:#6B7280">â€”</div>
    </div>
  </div>

  <!-- Header: Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„ÙƒØªØ§Ø¨ÙŠ ÙÙ‚Ø· -->
  <header id="hdr">
    <div class="container hdr-line">
      <div class="wordmark" aria-label="Ø´Ø¹Ø§Ø± Ù†Ù…Ùˆ NOMU">
        <svg viewBox="0 0 900 240" preserveAspectRatio="xMaxYMid meet" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#2B7BBC"/><stop offset="1" stop-color="#15A085"/>
            </linearGradient>
          </defs>
          <rect width="900" height="240" fill="transparent"/>
          <path d="M710 45c22 0 40 14 45 34-22 8-44-2-53-20-3-6-2-10 8-14z" fill="#15A085" opacity=".9"/>
          <text x="860" y="118" text-anchor="end" font-family="IBM Plex Sans Arabic, system-ui" font-weight="800" font-size="100" fill="url(#grad)">Ù†Ù…Ùˆ</text>
          <text x="852" y="168" text-anchor="end" font-family="IBM Plex Sans Arabic, system-ui" font-weight="700" font-size="52" fill="url(#grad)">NOMU</text>
          <text x="855" y="210" text-anchor="end" font-family="IBM Plex Sans Arabic, system-ui" font-weight="400" font-size="26" fill="#6B7280">Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø·ÙÙˆÙ„Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø©</text>
        </svg>
      </div>
    </div>

    <div class="container sponsors-line" id="sponsorsLine"></div>

    <nav class="container row" style="justify-content:center;gap:8px;flex-wrap:wrap;padding-bottom:10px">
      <a href="#/home" id="nav-home" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="#/journey" id="nav-journey">Ø±Ø­Ù„Ø© Ø§Ù„Ø·ÙÙ„</a>
      <a href="#/roles" id="nav-roles">Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠØ©</a>
      <a href="#/wallet" id="nav-wallet">Ù…Ø­ÙØ¸ØªÙŠ</a>
      <a href="#/market" id="nav-market">Ø³ÙˆÙ‚ Ø§Ù„Ø±Ø¹Ø§ÙŠØ©</a>
      <a href="#/kpis" id="nav-kpis">Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</a>
      <a href="#/about" id="nav-about">Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©</a>
      <a href="#/sponsor" id="nav-sponsor">Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ù†ØµØ©</a>
      <a href="#/contact" id="nav-contact">ØªÙˆØ§ØµÙ„</a>
    </nav>
  </header>

  <main class="container">
    <section id="home" class="hero view">
      <div class="card slideIn" style="background:linear-gradient(180deg,#fff,var(--beige-2));">
        <span class="badge">Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø·ÙÙˆÙ„Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø©</span>
        <h1 style="margin:10px 0 8px">Ø±Ø­Ù„Ø© Ø§Ù„Ø·ÙÙ„ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø­Ù…Ù„ Ø­ØªÙ‰ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</h1>
        <p class="muted" style="margin-bottom:16px;">ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø¨ÙŠÙ† Ø§Ù„ØµØ­Ø© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ… ÙˆØ§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©ØŒ Ù…Ø¹ ØªÙˆØµÙŠØ§Øª Ø°ÙƒÙŠØ© ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø«Ø± ÙˆØ·Ù†ÙŠØ©.</p>
        <div class="row">
          <button class="btn" onclick="go('#/journey')">Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø±Ø­Ù„Ø© Ø§Ù„Ø·ÙÙ„</button>
          <button class="btn alt" onclick="go('#/market')">ÙØ±Øµ Ø§Ù„Ø±Ø¹Ø§ÙŠØ©</button>
        </div>
      </div>
      <div class="card slideIn">
        <h3>Ù„Ù…Ø§Ø°Ø§ NOMUØŸ</h3>
        <div class="grid-3" style="margin-top:12px;">
          <div class="card view"><strong>ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</strong><p class="muted">ØµØ­Ø© + ØªØ¹Ù„ÙŠÙ… + ØªÙ†Ù…ÙŠØ© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙÙŠ Ù…Ù†ØµØ© ÙˆØ§Ø­Ø¯Ø©.</p></div>
          <div class="card view"><strong>ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø£Ø³Ø±Ø©</strong><p class="muted">Ù…Ù„Ù Ø­Ù…Ù„/Ø·ÙÙ„ ÙˆØªÙˆØµÙŠØ§Øª ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ©.</p></div>
          <div class="card view"><strong>Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ·Ù†ÙŠØ©</strong><p class="muted">Ù…Ø¤Ø´Ø±Ø§Øª Ù„Ø¯Ø¹Ù… Ø§Ù„Ù‚Ø±Ø§Ø± ÙˆØ§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ.</p></div>
        </div>
      </div>
    </section>

    <section id="journey" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ø±Ø­Ù„Ø© Ø§Ù„Ø·ÙÙ„</h2>
      <div class="timeline">
        <div class="tl-item view"><strong>Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø­Ù…Ù„</strong><p class="muted">ÙØ­Øµ Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø²ÙˆØ§Ø¬ØŒ Ø§Ù„ØªÙˆØ¹ÙŠØ©ØŒ Ø¯Ø¹Ù… Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„ØµØ­ÙŠ.</p></div>
        <div class="tl-item view"><strong>Ø§Ù„Ø­Ù…Ù„</strong><p class="muted">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§ØªØŒ Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ØŒ Ø¯Ø¹Ù… Ù†ÙØ³ÙŠ Ù„Ù„Ø£Ù…ØŒ ØªØ°ÙƒÙŠØ± Ø¨Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯.</p></div>
        <div class="tl-item view"><strong>Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©</strong><p class="muted">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ø·ÙÙ„ØŒ Ø§Ù„Ù„Ù‚Ø§Ø­Ø§ØªØŒ ÙØ­Øµ Ø§Ù„Ø³Ù…Ø¹ ÙˆØ§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ±.</p></div>
        <div class="tl-item view"><strong>0â€“3 Ø³Ù†ÙˆØ§Øª</strong><p class="muted">Ù…ØªØ§Ø¨Ø¹Ø© Ù†Ù…Ø§Ø¦ÙŠØ©ØŒ ØªÙˆØµÙŠØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©ØŒ Ø¥Ø­Ø§Ù„Ø§Øª Ù„Ù„ØªØ¯Ø®Ù„ Ø§Ù„Ù…Ø¨ÙƒØ±.</p></div>
        <div class="tl-item view"><strong>3â€“6 Ø³Ù†ÙˆØ§Øª</strong><p class="muted">ØªÙ‡ÙŠØ¦Ø© Ø±ÙˆØ¶ÙŠØ©ØŒ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©ØŒ Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ….</p></div>
      </div>
    </section>

    <section id="roles" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠØ©</h2>
      <div class="grid-3">
        <div class="card view"><h3>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØµØ­Ø©</h3><p>ÙØ­ÙˆØµ Ø§Ù„Ø­Ù…Ù„ ÙˆØ§Ù„Ø·ÙÙˆÙ„Ø©ØŒ ØªØ¯Ø®Ù„ Ù…Ø¨ÙƒØ±ØŒ Ø¯Ø¹Ù… Ù†ÙØ³ÙŠ Ù„Ù„Ø£Ù….</p></div>
        <div class="card view"><h3>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h3><p>Ø±ÙŠØ§Ø¶ Ø§Ù„Ø£Ø·ÙØ§Ù„ØŒ Ø®Ø·Ø· ÙØ±Ø¯ÙŠØ© IEPØŒ ØªÙ‚Ø§Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ©.</p></div>
        <div class="card view"><h3>Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©</h3><p>Ø¯Ø¹Ù… Ù…Ø§Ù„ÙŠ ÙˆØ£Ø³Ø±ÙŠØŒ Ù…Ù†ØµØ§Øª ØªÙ…ÙƒÙŠÙ† ÙˆØªØ·ÙˆØ¹.</p></div>
        <div class="card view"><h3>Ø§Ù„Ø¬Ù…Ø¹ÙŠØ§Øª Ø§Ù„Ø£Ù‡Ù„ÙŠØ©</h3><p>Ø¨Ø±Ø§Ù…Ø¬ Ø¯Ø¹Ù… ÙˆØ¥Ø±Ø´Ø§Ø¯ØŒ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ÙˆÙ…ØªØ·ÙˆØ¹ÙŠÙ†.</p></div>
        <div class="card view"><h3>Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ (CSR)</h3><p>Ø³ÙˆÙ‚ Ø±Ø¹Ø§ÙŠØ©ØŒ Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ù…Ø³ØªØ¯Ø§Ù…Ø©ØŒ ØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø«Ø±.</p></div>
        <div class="card view"><h3>Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</h3><p>Ø­ÙˆÙƒÙ…Ø© ÙˆÙ…Ø¤Ø´Ø±Ø§Øª ÙˆØ·Ù†ÙŠØ© ÙˆØªÙ†Ø§Ø³Ù‚ Ø³ÙŠØ§Ø³Ø§ØªÙŠ.</p></div>
      </div>
    </section>

    <section id="wallet" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ù…Ø­ÙØ¸ØªÙŠ</h2>
      <div class="wallet">
        <div class="card view">
          <h3>Ø§Ù„Ø±ØµÙŠØ¯</h3><p id="bal" style="font-weight:700;font-size:1.25rem">0 Ø±ÙŠØ§Ù„</p>
          <div class="row"><button class="btn" onclick="charge(500)">Ø´Ø­Ù† 500</button><button class="btn alt" onclick="charge(1000)">Ø´Ø­Ù† 1000</button><button class="btn ghost" onclick="charge(5000)">Ø´Ø­Ù† 5000</button></div>
        </div>
        <div class="card view">
          <h3>Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3><div id="tx" class="muted" style="margin-top:8px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯.</div>
          <div style="height:12px"></div>
          <div class="row" style="justify-content:flex-end">
            <button class="btn" onclick="buy('Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¯Ø±Ø³Ø© Ø£Ù‡Ù„ÙŠØ©',1500)">Ø¯ÙØ¹ Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¯Ø±Ø³Ø© Ø£Ù‡Ù„ÙŠØ© (1,500)</button>
            <button class="btn alt" onclick="buy('ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© Ù…ØªÙ‚Ø¯Ù…',200)">Ø´Ø±Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© (200)</button>
            <button class="btn ghost" onclick="go('#/sponsor')">Ø±Ø¹Ø§ÙŠØ© Ù…Ø¨Ø§Ø¯Ø±Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <section id="market" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ø³ÙˆÙ‚ Ø§Ù„Ø±Ø¹Ø§ÙŠØ© (CSR)</h2>
      <div class="grid-3">
        <div class="card view"><h3>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø¹Ù… Ø§Ù„Ø£Ù…Ù‡Ø§Øª Ø§Ù„Ø¬Ø¯Ø¯</h3><p class="muted">Ø¬Ù„Ø³Ø§Øª Ø¥Ø±Ø´Ø§Ø¯ ÙˆÙ†ÙØ³ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© â€“ Ù…Ù†Ø·Ù‚Ø© Ø­Ø§Ø¦Ù„.</p><div class="row" style="justify-content:space-between"><span class="badge">Ù…Ø³ØªÙ‡Ø¯Ù: 120,000 Ø±ÙŠØ§Ù„</span><button class="btn" onclick="openSponsor('Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø¹Ù… Ø§Ù„Ø£Ù…Ù‡Ø§Øª Ø§Ù„Ø¬Ø¯Ø¯',120000)">Ø±Ø¹Ø§ÙŠØ©</button></div></div>
        <div class="card view"><h3>ÙØ­Øµ Ù†Ù…Ø§Ø¦ÙŠ Ù…Ø¨ÙƒØ± 0â€“3</h3><p class="muted">Ø­Ù…Ù„Ø§Øª ÙØ­Øµ Ù…Ø¬ØªÙ…Ø¹ÙŠØ© ÙˆØ±Ø¨Ø· Ø¨Ø§Ù„Ø¥Ø­Ø§Ù„Ø©.</p><div class="row" style="justify-content:space-between"><span class="badge">Ù…Ø³ØªÙ‡Ø¯Ù: 200,000 Ø±ÙŠØ§Ù„</span><button class="btn" onclick="openSponsor('ÙØ­Øµ Ù†Ù…Ø§Ø¦ÙŠ Ù…Ø¨ÙƒØ±',200000)">Ø±Ø¹Ø§ÙŠØ©</button></div></div>
        <div class="card view"><h3>Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</h3><p class="muted">ØªÙ‡ÙŠØ¦Ø© 3â€“6 Ø³Ù†ÙˆØ§Øª ÙˆØªØ¯Ø±ÙŠØ¨ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±.</p><div class="row" style="justify-content:space-between"><span class="badge">Ù…Ø³ØªÙ‡Ø¯Ù: 150,000 Ø±ÙŠØ§Ù„</span><button class="btn" onclick="openSponsor('Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©',150000)">Ø±Ø¹Ø§ÙŠØ©</button></div></div>
      </div>
    </section>

    <section id="kpis" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ÙˆØ·Ù†ÙŠØ©</h2>
      <div class="grid-3">
        <div class="card view"><h3>% ÙØ­ÙˆØµ Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø²ÙˆØ§Ø¬</h3><p>â€”</p></div>
        <div class="card view"><h3>% Ø¯Ø¹Ù… Ù†ÙØ³ÙŠ Ù„Ù„Ø£Ù…Ù‡Ø§Øª</h3><p>â€”</p></div>
        <div class="card view"><h3>% ÙØ­Øµ Ù†Ù…Ø§Ø¦ÙŠ</h3><p>â€”</p></div>
        <div class="card view"><h3>% ØªØ¯Ø®Ù„ Ù…Ø¨ÙƒØ±</h3><p>â€”</p></div>
        <div class="card view"><h3>% Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</h3><p>â€”</p></div>
        <div class="card view"><h3>% Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø¬ØªÙ…Ø¹ÙŠØ©</h3><p>â€”</p></div>
      </div>
    </section>

    <section id="about" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©</h2>
      <div class="card view"><p>Â«Ù†Ù…Ùˆ NOMUÂ» Ù…Ø¨Ø§Ø¯Ø±Ø© ÙˆØ·Ù†ÙŠØ© ØªÙ†Ù…ÙˆÙŠØ© Ù…Ù† Ø´Ø±ÙƒØ© ØªÙ„Ø¨ÙŠØ© Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± (Ø§Ù„Ø­Ø§Ø¶Ù†Ø© Ù„Ù…Ø¨Ø§Ø¯Ø±Ø© ØªÙ„Ø¨ÙŠØ©)ØŒ ØªÙˆØ­Ù‘Ø¯ Ø±Ø­Ù„Ø© Ø§Ù„Ø·ÙÙ„ Ù…Ù† Ù…Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø­Ù…Ù„ Ø­ØªÙ‰ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø¹Ø¨Ø± ØªÙƒØ§Ù…Ù„ ØµØ­ÙŠ/ØªØ¹Ù„ÙŠÙ…ÙŠ/Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØŒ ÙˆØªØ±ØªÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ø¨Ø§Ù„ØªØ¯Ø®Ù„ Ø§Ù„Ù…Ø¨ÙƒØ± ÙˆØ®ÙØ¶ Ø§Ù„Ø£Ø¹Ø¨Ø§Ø¡ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø¨Ù…Ø§ ÙŠÙ†Ø³Ø¬Ù… Ù…Ø¹ Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ù…Ù„ÙƒØ© 2030.</p></div>
    </section>

    <section id="sponsor" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ø±Ø¹Ø§ÙŠØ© Ù…Ù†ØµØ© NOMU</h2>
      <p class="muted view" style="margin-bottom:8px;">Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ§Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Ù‹ Ù„Ø¯Ø¹Ù… Ø§Ø³ØªØ¯Ø§Ù…Ø© Ø§Ù„Ù…Ù†ØµØ© ÙˆØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø§Ù„ÙˆØ·Ù†ÙŠ.</p>
      <div class="grid-4">
        <div class="card view"><h3>Ø´Ø±ÙŠÙƒ Ù…Ø¬ØªÙ…Ø¹ÙŠ</h3><p class="muted">25,000 Ø±ÙŠØ§Ù„ / Ø³Ù†ÙˆÙŠ</p><ul><li>Ø¥Ø¯Ø±Ø§Ø¬ ÙÙŠ Ø³Ø¬Ù„ Ø§Ù„Ø´Ø±ÙƒØ§Ø¡</li><li>Ø´Ø¹Ø§Ø± ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø±Ø¹Ø§ÙŠØ©</li><li>ØªÙ‚Ø±ÙŠØ± Ø£Ø«Ø± Ù…Ø®ØªØµØ±</li></ul><button class="btn" onclick="openSponsor('Ø´Ø±ÙŠÙƒ Ù…Ø¬ØªÙ…Ø¹ÙŠ',25000)">Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø¢Ù†</button></div>
        <div class="card view"><h3>Ø´Ø±ÙŠÙƒ ÙØ¶ÙŠ</h3><p class="muted">100,000 Ø±ÙŠØ§Ù„ / Ø³Ù†ÙˆÙŠ</p><ul><li>Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª ÙˆØ§Ù„Ù…ÙƒØªØ¨Ø©</li><li>Ù‚ØµØ© Ù†Ø¬Ø§Ø­ Ø³Ù†ÙˆÙŠØ©</li><li>ÙˆØµÙˆÙ„ Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ø¯Ø¯Ø©</li></ul><button class="btn" onclick="openSponsor('Ø´Ø±ÙŠÙƒ ÙØ¶ÙŠ',100000)">Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø¢Ù†</button></div>
        <div class="card view"><h3>Ø´Ø±ÙŠÙƒ Ø°Ù‡Ø¨ÙŠ</h3><p class="muted">250,000 Ø±ÙŠØ§Ù„ / Ø³Ù†ÙˆÙŠ</p><ul><li>Ø´Ø¹Ø§Ø± ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</li><li>ØªÙ‚Ø§Ø±ÙŠØ± ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ø®ØµØµØ©</li><li>Ø¯Ø¹ÙˆØ§Øª Ù„Ù…Ù„ØªÙ‚ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ©</li></ul><button class="btn" onclick="openSponsor('Ø´Ø±ÙŠÙƒ Ø°Ù‡Ø¨ÙŠ',250000)">Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø¢Ù†</button></div>
        <div class="card view"><h3>Ø´Ø±ÙŠÙƒ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ</h3><p class="muted">500,000 Ø±ÙŠØ§Ù„ / Ø³Ù†ÙˆÙŠ</p><ul><li>Ø´Ø¹Ø§Ø± ÙÙŠ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª</li><li>ØªÙ‚Ø±ÙŠØ± Ø£Ø«Ø± Ø³Ù†ÙˆÙŠ Ù…ÙˆØ³Ø¹</li><li>Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</li></ul><button class="btn" onclick="openSponsor('Ø´Ø±ÙŠÙƒ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ',500000)">Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø¢Ù†</button></div>
      </div>

      <div class="card view" style="margin-top:16px;">
        <h3>Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¹Ù (Ù…Ø­Ù„ÙŠÙ‹Ø§ Ù„Ù„ØªØ¬Ø±Ø¨Ø©)</h3>
        <div class="row" style="gap:10px;align-items:flex-end;flex-wrap:wrap">
          <div style="display:grid;gap:6px">
            <label>Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø¹ÙŠ</label>
            <input id="spName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px"/>
          </div>
          <div style="display:grid;gap:6px">
            <label>Ø§Ù„ÙØ¦Ø©</label>
            <select id="spTier" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px">
              <option value="gold">Ø°Ù‡Ø¨ÙŠ</option>
              <option value="silver">ÙØ¶ÙŠ</option>
              <option value="bronze">Ù…Ø¬ØªÙ…Ø¹ÙŠ</option>
            </select>
          </div>
          <div style="display:grid;gap:6px;flex:1;min-width:240px">
            <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <input id="spLogo" placeholder="https://example.com/logo.png" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px"/>
          </div>
          <button class="btn alt" onclick="addSponsor()">Ø¥Ø¶Ø§ÙØ©</button>
          <button class="btn ghost" onclick="resetSponsors()">Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
          <button class="btn" onclick="exportSponsorsCSV()">ØªØµØ¯ÙŠØ± CSV</button>
        </div>
        <small class="muted">* ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­ (localStorage) Ù„ØºØ±Ø¶ Ø§Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø·.</small>
      </div>
    </section>

    <section id="sponsorProfile" class="hide">
      <h2 class="view" style="margin-bottom:12px;">Ù…Ù„Ù Ø§Ù„Ø±Ø§Ø¹ÙŠ</h2>
      <div id="spProfileCard" class="card view">â€”</div>
      <div class="row" style="justify-content:flex-end;margin-top:10px;gap:8px">
        <button class="btn ghost" onclick="go('#/sponsor')">Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¹Ø§ÙŠØ©</button>
        <button class="btn alt" onclick="shareSponsor()">Ù…Ø´Ø§Ø±ÙƒØ©</button>
      </div>
    </section>

    <section id="contact" class="hide">
      <h2 class="view" style="margin-bottom:12px;">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
      <div class="card view"><p>ğŸ“§ info@talbiya.sa<br/>ğŸ“ +966507208120</p></div>
    </section>
  </main>

  <div class="stats-bar">
    <div class="container stats-grid" id="statsGrid">
      <div class="stat"><h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¹Ø§ÙŠØ§Øª</h4><div id="stTotal" class="muted">â€”</div></div>
      <div class="stat"><h4>Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø¹Ø§Ø©</h4><div id="stCount" class="muted">â€”</div></div>
      <div class="stat"><h4>Ø°Ù‡Ø¨ÙŠ/ÙØ¶ÙŠ/Ù…Ø¬ØªÙ…Ø¹ÙŠ</h4><div id="stTiers" class="muted">â€”</div></div>
      <div class="stat"><h4>Ø¢Ø®Ø± Ø¥Ø¶Ø§ÙØ©</h4><div id="stLast" class="muted">â€”</div></div>
    </div>
  </div>

  <footer>
    <div>Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€“ Ù…Ù†ØµØ© Ù†Ù…Ùˆ NOMU<br>Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±ÙŠ: Ø´Ø±ÙƒØ© ØªÙ„Ø¨ÙŠØ© Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø­Ø§Ø¶Ù†Ø© Ù„Ù…Ø¨Ø§Ø¯Ø±Ø© ØªÙ„Ø¨ÙŠØ©</div>
  </footer>

  <!-- Modal Ø§Ù„Ø±Ø¹Ø§ÙŠØ© -->
  <div class="modal hide" id="sponsorModal" aria-hidden="true" aria-label="Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¹Ø§ÙŠØ©"
       style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,12,23,.45);z-index:200">
    <div class="content" style="background:#fff;border-radius:16px;max-width:680px;width:92%;padding:18px;box-shadow:var(--shadow)">
      <div class="row" style="justify-content:space-between">
        <h3 id="pkgTitle">Ø·Ù„Ø¨ Ø±Ø¹Ø§ÙŠØ©</h3>
        <button class="btn ghost" onclick="closeSponsor()">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
      <form onsubmit="return submitSponsor(event)">
        <div class="field" style="display:grid;gap:6px;margin:10px 0">
          <label>Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø©</label>
          <input required id="orgName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©/Ø§Ù„Ù…Ø¤Ø³Ø³Ø©" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px;font-family:inherit"/>
        </div>
        <div class="field" style="display:grid;gap:6px;margin:10px 0">
          <label>Ø§Ù„Ø¨Ø§Ù‚Ø©</label>
          <select id="pkgSelect" onchange="recalc()" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px;font-family:inherit">
            <option value="25000">Ø´Ø±ÙŠÙƒ Ù…Ø¬ØªÙ…Ø¹ÙŠ â€“ 25,000</option>
            <option value="100000">Ø´Ø±ÙŠÙƒ ÙØ¶ÙŠ â€“ 100,000</option>
            <option value="250000">Ø´Ø±ÙŠÙƒ Ø°Ù‡Ø¨ÙŠ â€“ 250,000</option>
            <option value="500000">Ø´Ø±ÙŠÙƒ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ â€“ 500,000</option>
          </select>
        </div>
        <div class="field" style="display:grid;gap:6px;margin:10px 0">
          <label>Ù…Ø¯Ø© Ø§Ù„Ø±Ø¹Ø§ÙŠØ©</label>
          <select id="duration" onchange="recalc()" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px;font-family:inherit">
            <option value="1">Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©</option>
            <option value="2">Ø³Ù†ØªØ§Ù† (Ø®ØµÙ… 5%)</option>
            <option value="3">Ø«Ù„Ø§Ø« Ø³Ù†ÙˆØ§Øª (Ø®ØµÙ… 10%)</option>
          </select>
        </div>
        <div class="field" style="display:grid;gap:6px;margin:10px 0">
          <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
          <textarea id="notes" rows="3" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©" style="padding:10px 12px;border:1px solid #E2E8F0;border-radius:12px;font-family:inherit"></textarea>
        </div>
        <div class="row" style="justify-content:space-between;align-items:center;margin-top:6px">
          <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</div>
          <div id="totalPrice" style="font-weight:700;font-size:1.15rem">â€”</div>
        </div>
        <div class="row" style="justify-content:flex-end;margin-top:10px">
          <button class="btn alt" type="button" onclick="simulatePay()">Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</button>
          <button class="btn" type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨</button>
        </div>
        <p class="muted" style="margin-top:8px">* Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠ Ù…Ø¹ HyperPay ÙŠØªØ·Ù„Ø¨ Ø¥Ù†Ø´Ø§Ø¡ checkoutId Ø¹Ø¨Ø± Ø®Ø§Ø¯Ù… Ø§Ù„Ù…Ù†ØµØ©.</p>
      </form>
    </div>
  </div>

  <script>
    // ===== Routing =====
    const sections = ['home','journey','roles','wallet','market','kpis','about','sponsor','sponsorProfile','contact'];
    const navIds   = ['nav-home','nav-journey','nav-roles','nav-wallet','nav-market','nav-kpis','nav-about','nav-sponsor','nav-contact'];

    function render(){
      const hash = location.hash || '#/home';
      const route = hash.replace('#/','');
      const [base, query] = route.split('?');
      sections.forEach(id=>{
        const el=document.getElementById(id); if(!el) return;
        const show=(id===base);
        el.classList.toggle('hide',!show);
        if(show){ el.classList.remove('view'); void el.offsetWidth; el.classList.add('view'); }
      });
      navIds.forEach(id=>{ const el=document.getElementById(id); if(el) el.classList.toggle('active', el.getAttribute('href')===('#/'+base)); });
      if(base==='sponsorProfile'){ renderSponsorProfile(new URLSearchParams(query)); }
      updateStats();
      window.scrollTo({top:0,behavior:'smooth'});
      try{ recalc(); loadWallet(); }catch(e){}
    }
    function go(h){ location.hash=h; }
    window.addEventListener('hashchange', render);
    document.addEventListener('DOMContentLoaded', ()=>{ render(); drawSponsors(); updateStats(); });

    // ===== Payment (HyperPay stub) =====
    async function simulatePay(){
      const amount = recalc();
      if(!amount){ alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¨Ø§Ù‚Ø© Ø£ÙˆÙ„Ø§Ù‹.'); return; }
      try{
        const res = await fetch('/create-checkout', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ amount, currency:'SAR', paymentType:'DB' })
        });
        const data = await res.json();
        if(!data.checkoutId) throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… checkoutId');
        const s = document.createElement('script'); s.src = 'https://oppwa.com/v1/paymentWidgets.js?checkoutId='+data.checkoutId;
        s.onload = ()=>{ window.location.href = 'https://oppwa.com/payment-widget?checkoutId='+data.checkoutId; };
        s.onerror = ()=>alert('ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Widget HyperPay');
        document.body.appendChild(s);
      }catch(err){ alert('ØªØ¹Ø°Ù‘Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹: '+err.message); }
    }

    // ===== Wallet (demo) =====
    function loadWallet(){ const bal=+localStorage.getItem('nomu_bal')||0; const txs=JSON.parse(localStorage.getItem('nomu_txs')||'[]'); const balEl=document.getElementById('bal'); if(balEl) balEl.textContent=bal.toLocaleString('ar-EG')+' Ø±ÙŠØ§Ù„'; const txEl=document.getElementById('tx'); if(txEl) txEl.innerHTML= txs.length?('<ul>'+txs.map(t=>'<li>'+t+'</li>').join('')+'</ul>'):'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯.'; }
    function saveWallet(bal, note){ localStorage.setItem('nomu_bal', String(bal)); const txs=JSON.parse(localStorage.getItem('nomu_txs')||'[]'); txs.unshift(new Date().toLocaleString('ar-EG')+' â€” '+note); localStorage.setItem('nomu_txs', JSON.stringify(txs.slice(0,50))); loadWallet(); }
    function charge(amount){ let bal=+localStorage.getItem('nomu_bal')||0; bal+=amount; saveWallet(bal,'Ø´Ø­Ù† Ù…Ø­ÙØ¸Ø© +'+amount.toLocaleString('ar-EG')+' Ø±ÙŠØ§Ù„'); alert('ØªÙ… Ø§Ù„Ø´Ø­Ù† Ø¨Ù†Ø¬Ø§Ø­.'); }
    function buy(label, amount){ let bal=+localStorage.getItem('nomu_bal')||0; if(bal<amount){ alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ.'); return; } bal-=amount; saveWallet(bal,'Ø´Ø±Ø§Ø¡: '+label+' -'+amount.toLocaleString('ar-EG')+' Ø±ÙŠØ§Ù„'); alert('ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.'); }

    // ===== Sponsors =====
    const DEFAULT_SPONSORS=[
      { id:'alef', name:'Ø´Ø±ÙƒØ© Ø£Ù„Ù', tier:'gold',  logo:'', initials:'Ø£', amount:250000, since:'2025-01-01' },
      { id:'baa',  name:'Ø´Ø±ÙƒØ© Ø¨Ø§Ø¡', tier:'silver',logo:'', initials:'Ø¨', amount:100000, since:'2025-02-10' },
      { id:'jeem', name:'Ø´Ø±ÙƒØ© Ø¬ÙŠÙ…', tier:'bronze',logo:'', initials:'Ø¬', amount:25000,  since:'2025-03-05' }
    ];
    function getSponsors(){ try{ return JSON.parse(localStorage.getItem('nomu_sponsors')||'null')||DEFAULT_SPONSORS; }catch(_ ){ return DEFAULT_SPONSORS; } }
    function saveSponsors(list){ localStorage.setItem('nomu_sponsors', JSON.stringify(list)); drawSponsors(); updateStats(); }
    function addSponsor(){
      const name=spName.value.trim(); const tier=spTier.value; const logo=spLogo.value.trim();
      if(!name){ alert('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø¹ÙŠ'); return; }
      const initials = Array.from(name)[0];
      const id = (name+'-'+Date.now()).toLowerCase().replace(/[^a-z0-9]+/g,'-');
      const amount = tier==='gold'?250000 : tier==='silver'?100000 : 25000;
      const sp={id,name,tier,logo,initials,amount, since:new Date().toISOString().slice(0,10)};
      const list=getSponsors(); list.unshift(sp); saveSponsors(list);
      spName.value=''; spLogo.value='';
    }
    function resetSponsors(){ if(confirm('Ø³ÙŠØªÙ… Ø­Ø°Ù Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¹Ø§Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©.')) saveSponsors(DEFAULT_SPONSORS); }
    function drawSponsors(){
      const list=getSponsors();
      const line=document.getElementById('sponsorsLine'); if(!line) return;
      line.innerHTML='';
      list.forEach(sp=>{
        const wrap=document.createElement('div'); wrap.className='tier-'+(sp.tier||'bronze');
        const box=document.createElement('div'); box.className='s-logo'; box.title=sp.name;
        if(sp.logo){ const img=document.createElement('img'); img.src=sp.logo; img.alt=sp.name; img.style='max-width:100%;max-height:100%;border-radius:8px;'; box.appendChild(img); }
        else{ box.textContent=sp.initials||sp.name?.slice(0,1)||'â€”'; }
        box.onclick=()=>go('#/sponsorProfile?id='+encodeURIComponent(sp.id));
        wrap.appendChild(box);
        line.appendChild(wrap);
      });
    }

    // ===== Stats =====
    function updateStats(){
      const list=getSponsors();
      const total=list.reduce((s,sp)=>s+(+sp.amount||0),0);
      const gold=list.filter(s=>s.tier==='gold').length;
      const silver=list.filter(s=>s.tier==='silver').length;
      const bronze=list.filter(s=>s.tier==='bronze').length;
      const last = list[0];
      document.getElementById('stTotal').textContent = total.toLocaleString('ar-EG')+' Ø±ÙŠØ§Ù„';
      document.getElementById('stCount').textContent = list.length.toLocaleString('ar-EG');
      document.getElementById('stTiers').textContent = gold+' / '+silver+' / '+bronze;
      document.getElementById('stLast').textContent  = last? (last.name+' â€“ '+(last.since||'â€”')):'â€”';
    }

    // ===== Sponsor Profile & Share =====
    function renderSponsorProfile(params){
      const id = params.get('id')||'';
      const sp = getSponsors().find(s=>String(s.id)===String(id));
      const card=document.getElementById('spProfileCard');
      if(!card) return;
      if(!sp){ card.innerHTML='<p class="muted">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨.</p>'; return; }
      const badge = sp.tier==='gold'?'Ø°Ù‡Ø¨ÙŠ': sp.tier==='silver'?'ÙØ¶ÙŠ':'Ù…Ø¬ØªÙ…Ø¹ÙŠ';
      card.innerHTML = `
        <div class="row" style="gap:16px; align-items:center; flex-wrap:wrap">
          <div class="s-logo tier-${sp.tier}">${sp.logo?'<img src="${sp.logo}" alt="${sp.name}" style="max-width:100%;max-height:100%;border-radius:8px;">': (sp.initials||sp.name.slice(0,1)) }</div>
          <div>
            <h3 style="margin-bottom:4px">${sp.name}</h3>
            <div class="muted">ÙØ¦Ø© Ø§Ù„Ø±Ø¹Ø§ÙŠØ©: ${badge} â€¢ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…: ${(+sp.amount||0).toLocaleString('ar-EG')} Ø±ÙŠØ§Ù„ â€¢ Ù…Ù†Ø°: ${sp.since||'â€”'}</div>
            <div style="margin-top:6px"><small class="muted">Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø³ÙŠØ´ÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©.</small></div>
          </div>
        </div>
      `;
      localStorage.setItem('nomu_last_sp', id);
    }
    async function shareSponsor(){
      const lastId = localStorage.getItem('nomu_last_sp');
      if(!lastId){ alert('Ø§ÙØªØ­ Ù…Ù„Ù Ø±Ø§Ø¹Ù Ø£ÙˆÙ„Ø§Ù‹.'); return; }
      const url = location.origin + location.pathname + '#/sponsorProfile?id=' + encodeURIComponent(lastId);
      const title = 'Ù…Ù†ØµØ© NOMU â€“ Ù…Ù„Ù Ø±Ø§Ø¹Ù';
      const text = 'Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ø±Ø§Ø¹ÙŠ ÙÙŠ Ù…Ù†ØµØ© Ù†Ù…Ùˆ NOMU';
      try{
        if(navigator.share){
          await navigator.share({ title, text, url });
        }else{
          await navigator.clipboard.writeText(url);
          alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ' + url);
        }
      }catch(e){
        try{ await navigator.clipboard.writeText(url); alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ' + url); }
        catch(_){ alert(url); }
      }
    }

    // ===== CSV Export =====
    function exportSponsorsCSV(){
      const list = getSponsors();
      const rows = [['id','name','tier','amount','since','logo']].concat(
        list.map(s=>[s.id,s.name,s.tier,s.amount,s.since||'',s.logo||''])
      );
      const csv = rows.map(r=>r.map(v=>(''+v).replace(/"/g,'""')).map(v=>`"${v}"`).join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'nomu_sponsors.csv'; a.click();
      URL.revokeObjectURL(url);
    }

    // ===== Calc helpers =====
    function openSponsor(title, price){
      const m=document.getElementById('sponsorModal');
      m.style.display='flex';
      document.getElementById('pkgTitle').textContent='Ø·Ù„Ø¨ Ø±Ø¹Ø§ÙŠØ© â€“ '+title;
      const select=document.getElementById('pkgSelect');
      [...select.options].forEach(o=>{ if(parseInt(o.value)==price) select.value=o.value; });
      recalc();
    }
    function closeSponsor(){ document.getElementById('sponsorModal').style.display='none'; }
    function recalc(){
      const base=parseInt(document.getElementById('pkgSelect')?.value||'0');
      const years=parseInt(document.getElementById('duration')?.value||'1');
      let total=base*years; if(years==2) total*=0.95; if(years==3) total*=0.90;
      const el=document.getElementById('totalPrice');
      if(el) el.textContent= total? (total.toLocaleString('ar-EG')+' Ø±ÙŠØ§Ù„'):'â€”'; return total;
    }
    function submitSponsor(e){
      e.preventDefault();
      const data={ org:orgName.value.trim(), pkg:+pkgSelect.value, years:+duration.value, notes:notes.value.trim(), total:recalc() };
      alert('ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­.\n'+JSON.stringify(data,null,2));
      closeSponsor(); return false;
    }
  </script>

  <script>
    (function enhanceModalClose(){
      try{
        const modal = document.getElementById('sponsorModal');
        if(modal){
          modal.addEventListener('click', function(e){ if(e.target===modal){ modal.style.display='none'; }});
          document.addEventListener('keydown', function(e){ if(e.key==='Escape'){ modal.style.display='none'; }});
          window.addEventListener('hashchange', function(){ modal.style.display='none'; });
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
